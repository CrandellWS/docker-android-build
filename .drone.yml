build:
  image: ubuntu:14.04
  commands:
    # Do an initial checkout to allow the Dockerfile prime the image with gradle and dependencies
    # For now, clone a specific branch
    - git clone --depth=5 https://github.com/reddit/Frontpage-Android.git Frontpage-Android

publish:
  ecr:
    region: us-east-1
    repo: 210246326331.dkr.ecr.us-east-1.amazonaws.com/android_build
    # Image gets tagged with the branch's name.
    tag: $$BRANCH
    file: Dockerfile

# These plugins are triggered after a build failure/success.
#notify:
  #slack:
  #  webhook_url: $$CI_SLACK_WEBHOOK_URL
  #  channel: ci-notifications
